{"ast":null,"code":"import _defineProperty from\"C:/Users/admin/Documents/Workspace/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"C:/Users/admin/Documents/Workspace/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/admin/Documents/Workspace/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import Axios from\"axios\";export var getAllChatsAsync=createAsyncThunk(\"chats/getAllchatAsync\",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"fetching data\");_context.next=3;return Axios.get(\"https://chat-web-vz9a.onrender.com/api/chat\",{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});case 3:data=_context.sent;return _context.abrupt(\"return\",data);case 5:case\"end\":return _context.stop();}}},_callee);})));export var getChatID=createAsyncThunk(\"chats/getChatID\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(userID1,userID2){var data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Axios.get(\"https://chat-web-vz9a.onrender.com/api/chat\",{headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});case 2:data=_context2.sent;return _context2.abrupt(\"return\",data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}());var ChatSlice=createSlice({name:\"chats\",initialState:[],reducers:{addLatestMessage:function addLatestMessage(state,action){state.chats.find(function(chat){return chat._id==action.payload.id;}).latestMessage.content=action.payload.latestMessage;state.chats.find(function(chat){return chat._id==action.payload.id;}).latestMessage.createAt=action.payload.createAt;console.log(state);}},extraReducers:_defineProperty({},getAllChatsAsync.fulfilled,function(state,action){state=action.payload.data.data;console.log(state);return action.payload.data.data;})});var _ChatSlice$actions=ChatSlice.actions,getAllChats=_ChatSlice$actions.getAllChats,addLatestMessage=_ChatSlice$actions.addLatestMessage;export{getAllChats,addLatestMessage};export default ChatSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","Axios","getAllChatsAsync","console","log","get","headers","Authorization","localStorage","getItem","data","getChatID","userID1","userID2","ChatSlice","name","initialState","reducers","addLatestMessage","state","action","chats","find","chat","_id","payload","id","latestMessage","content","createAt","extraReducers","fulfilled","actions","getAllChats","reducer"],"sources":["C:/Users/admin/Documents/Workspace/client/src/redux/Slices/ChatSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport Axios from \"axios\";\r\nexport const getAllChatsAsync = createAsyncThunk(\r\n  \"chats/getAllchatAsync\",\r\n  async () => {\r\n    console.log(\"fetching data\");\r\n    const data = await Axios.get(\"https://chat-web-vz9a.onrender.com/api/chat\", {\r\n      headers: {\r\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n      },\r\n    });\r\n    return data;\r\n  }\r\n  );\r\n  export const getChatID = createAsyncThunk(\r\n    \"chats/getChatID\",\r\n    async (userID1, userID2) => {\r\n        const data = await Axios.get(`https://chat-web-vz9a.onrender.com/api/chat`,{\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\r\n            },\r\n          }\r\n        );\r\n        return data;\r\n      } \r\n  );\r\n  const ChatSlice = createSlice({\r\n    name: \"chats\",\r\n  initialState: [],\r\n    reducers: {\r\n        addLatestMessage: (state, action) => {\r\n        state.chats.find((chat) => chat._id == action.payload.id).latestMessage.content = action.payload.latestMessage;\r\n         state.chats.find(\r\n           (chat) => chat._id == action.payload.id\r\n         ).latestMessage.createAt = action.payload.createAt;\r\n        console.log(state);\r\n    },\r\n    \r\n  },\r\n  extraReducers: {\r\n    [getAllChatsAsync.fulfilled]: (state, action) => {\r\n      state = action.payload.data.data;\r\n      console.log(state);\r\n       return action.payload.data.data;\r\n    },  \r\n  },\r\n});\r\nexport const { getAllChats, addLatestMessage } = ChatSlice.actions;\r\nexport default ChatSlice.reducer;\r\n"],"mappings":"+YAAA,OAASA,WAAT,CAAsBC,gBAAtB,KAA8C,kBAA9C,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAO,IAAMC,iBAAgB,CAAGF,gBAAgB,CAC9C,uBAD8C,wEAE9C,8IACEG,OAAO,CAACC,GAAR,CAAY,eAAZ,EADF,sBAEqBH,MAAK,CAACI,GAAN,CAAU,6CAAV,CAAyD,CAC1EC,OAAO,CAAE,CACPC,aAAa,kBAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ,CADN,CADiE,CAAzD,CAFrB,QAEQC,IAFR,+CAOSA,IAPT,wDAF8C,GAAzC,CAYL,MAAO,IAAMC,UAAS,CAAGX,gBAAgB,CACvC,iBADuC,6FAEvC,kBAAOY,OAAP,CAAgBC,OAAhB,wJACuBZ,MAAK,CAACI,GAAN,+CAAwD,CACvEC,OAAO,CAAE,CACPC,aAAa,kBAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ,CADN,CAD8D,CAAxD,CADvB,QACUC,IADV,iDAOWA,IAPX,0DAFuC,oEAAlC,CAYP,GAAMI,UAAS,CAAGf,WAAW,CAAC,CAC5BgB,IAAI,CAAE,OADsB,CAE9BC,YAAY,CAAE,EAFgB,CAG5BC,QAAQ,CAAE,CACNC,gBAAgB,CAAE,0BAACC,KAAD,CAAQC,MAAR,CAAmB,CACrCD,KAAK,CAACE,KAAN,CAAYC,IAAZ,CAAiB,SAACC,IAAD,QAAUA,KAAI,CAACC,GAAL,EAAYJ,MAAM,CAACK,OAAP,CAAeC,EAArC,EAAjB,EAA0DC,aAA1D,CAAwEC,OAAxE,CAAkFR,MAAM,CAACK,OAAP,CAAeE,aAAjG,CACCR,KAAK,CAACE,KAAN,CAAYC,IAAZ,CACE,SAACC,IAAD,QAAUA,KAAI,CAACC,GAAL,EAAYJ,MAAM,CAACK,OAAP,CAAeC,EAArC,EADF,EAEEC,aAFF,CAEgBE,QAFhB,CAE2BT,MAAM,CAACK,OAAP,CAAeI,QAF1C,CAGD1B,OAAO,CAACC,GAAR,CAAYe,KAAZ,EACH,CAPS,CAHkB,CAa9BW,aAAa,oBACV5B,gBAAgB,CAAC6B,SADP,CACmB,SAACZ,KAAD,CAAQC,MAAR,CAAmB,CAC/CD,KAAK,CAAGC,MAAM,CAACK,OAAP,CAAef,IAAf,CAAoBA,IAA5B,CACAP,OAAO,CAACC,GAAR,CAAYe,KAAZ,EACC,MAAOC,OAAM,CAACK,OAAP,CAAef,IAAf,CAAoBA,IAA3B,CACF,CALU,CAbiB,CAAD,CAA7B,CAqBK,uBAA0CI,SAAS,CAACkB,OAApD,CAAQC,WAAR,oBAAQA,WAAR,CAAqBf,gBAArB,oBAAqBA,gBAArB,C,qCACP,cAAeJ,UAAS,CAACoB,OAAzB"},"metadata":{},"sourceType":"module"}