{"ast":null,"code":"import _slicedToArray from\"C:/Users/admin/Documents/Workspace/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from'react';import{useNavigate,useParams}from'react-router';import{useDispatch,useSelector}from'react-redux';import{addNewFriendAsync}from'../redux/Slices/UserSlice';import{getChatID}from'../redux/Slices/ChatSlice';import\"../scss/components/PersonalContent.css\";import{getUserByIdAsync}from'../redux/Slices/UserSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PersonalContent=function PersonalContent(){var _person$friends;var params=useParams();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isFriend=_React$useState2[0],setIsFriend=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isRequest=_React$useState4[0],setIsRequest=_React$useState4[1];var _React$useState5=React.useState(params.id),_React$useState6=_slicedToArray(_React$useState5,2),personId=_React$useState6[0],setPersonId=_React$useState6[1];var _React$useState7=React.useState({}),_React$useState8=_slicedToArray(_React$useState7,2),person=_React$useState8[0],setPerson=_React$useState8[1];var dispatch=useDispatch();var navigate=useNavigate();var handleCancelRequest=function handleCancelRequest(){setIsRequest(false);};var handleAddingFriend=function handleAddingFriend(){dispatch(addNewFriendAsync({id:personId})).then(function(res){setIsRequest(true);});};useEffect(function(){dispatch(getUserByIdAsync(personId)).then(function(res){setPerson(res.payload.data.data.user);});},[dispatch]);var myID=useSelector(function(state){return state.auth[0].user._id;});console.log(person);var r1=(_person$friends=person.friends)!==null&&_person$friends!==void 0&&_person$friends.find(function(friend){return friend._id===myID;})?true:false;useEffect(function(){setIsFriend(r1);});var handleMessage=function handleMessage(){dispatch(getChatID(myID,person._id)).then(function(res){navigate(\"/Message_ChatWindow/\".concat(res.payload.data.data.chats[0]._id));// console.log(res.payload.data.data.chats[0]._id);\n});};var personName=person.name;return/*#__PURE__*/_jsx(\"div\",{className:\"personal-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"personal-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"personal-content-header-cover\",children:/*#__PURE__*/_jsx(\"img\",{className:\"cover-img\",src:\"https://img.freepik.com/free-photo/grunge-paint-background_1409-1337.jpg?w=2000\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"personal-content-header-avatar\",children:/*#__PURE__*/_jsx(\"img\",{className:\"avatar__image\",src:\"http://chiase24.com/wp-content/uploads/2022/02/tang-hap-hanh-anh-avatar-hai-haeac-nhan-la-ba_t-caea_i-1.jpg\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"personal-content-header-info\",children:/*#__PURE__*/_jsx(\"div\",{className:\"personal-content-header-info-name\",children:/*#__PURE__*/_jsx(\"h3\",{children:personName})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"personal-content-header-button\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"addfriend-btn btn\",onClick:isFriend?handleMessage:isRequest?handleCancelRequest:handleAddingFriend,children:isFriend?\"Message\":isRequest?\"Cancel Request\":\"Add Friend\"}),/*#__PURE__*/_jsx(\"button\",{className:\"block-btn btn\",children:\"Block\"})]})]})});};export default PersonalContent;","map":{"version":3,"names":["React","useEffect","useNavigate","useParams","useDispatch","useSelector","addNewFriendAsync","getChatID","getUserByIdAsync","PersonalContent","params","useState","isFriend","setIsFriend","isRequest","setIsRequest","id","personId","setPersonId","person","setPerson","dispatch","navigate","handleCancelRequest","handleAddingFriend","then","res","payload","data","user","myID","state","auth","_id","console","log","r1","friends","find","friend","handleMessage","chats","personName","name"],"sources":["C:/Users/admin/Documents/Workspace/client/src/components/PersonalContent.js"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { useNavigate, useParams } from 'react-router'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { addNewFriendAsync } from '../redux/Slices/UserSlice';\r\nimport { getChatID } from '../redux/Slices/ChatSlice';\r\nimport \"../scss/components/PersonalContent.css\";\r\nimport { getUserByIdAsync } from '../redux/Slices/UserSlice';\r\nconst PersonalContent = () => {\r\n  const params = useParams();\r\n  const [isFriend, setIsFriend] = React.useState(false);\r\n  const [isRequest, setIsRequest] = React.useState(false);\r\n  const [personId, setPersonId] = React.useState(params.id);\r\n  const [person, setPerson] = React.useState({});\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const handleCancelRequest = () => {\r\n    setIsRequest(false);\r\n  };\r\n  const handleAddingFriend = () => {\r\n    dispatch(addNewFriendAsync({\r\n      id: personId\r\n    })).then((res) => { \r\n      setIsRequest(true);\r\n    });\r\n  }\r\n   useEffect(() => {\r\n     dispatch(getUserByIdAsync(personId)).then((res) => {\r\n       setPerson(res.payload.data.data.user);\r\n     });\r\n   }, [dispatch]);\r\n    const myID = useSelector((state) => state.auth[0].user._id);\r\n    console.log(person);\r\n    const r1 = person.friends?.find(friend => friend._id === myID)?true:false;\r\n    useEffect(() => {\r\n      setIsFriend(r1);\r\n    })\r\n    const handleMessage = () => {\r\n        dispatch(getChatID(myID,person._id)).then((res) => {\r\n          navigate(`/Message_ChatWindow/${res.payload.data.data.chats[0]._id}`);\r\n          // console.log(res.payload.data.data.chats[0]._id);\r\n        });\r\n    };\r\n    const personName = person.name;\r\n    return (\r\n      <div className=\"personal-container\">\r\n        <div className=\"personal-content\">\r\n          <div className=\"personal-content-header-cover\">\r\n            <img className=\"cover-img\" src=\"https://img.freepik.com/free-photo/grunge-paint-background_1409-1337.jpg?w=2000\"></img>\r\n          </div>\r\n          <div className=\"personal-content-header-avatar\">\r\n            <img\r\n              className=\"avatar__image\"\r\n              src=\"http://chiase24.com/wp-content/uploads/2022/02/tang-hap-hanh-anh-avatar-hai-haeac-nhan-la-ba_t-caea_i-1.jpg\"\r\n            ></img>\r\n          </div>\r\n          <div className=\"personal-content-header-info\">\r\n            <div className=\"personal-content-header-info-name\">\r\n              <h3>{personName}</h3>\r\n            </div>\r\n          </div>\r\n          <div className=\"personal-content-header-button\">\r\n            <button className=\"addfriend-btn btn\" onClick={isFriend?handleMessage:isRequest?handleCancelRequest:handleAddingFriend}>{isFriend?\"Message\":isRequest?\"Cancel Request\":\"Add Friend\"}</button>\r\n            <button className=\"block-btn btn\" >Block</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  export default PersonalContent;"],"mappings":"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"},"metadata":{},"sourceType":"module"}