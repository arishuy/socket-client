{"ast":null,"code":"import _slicedToArray from\"C:/Users/admin/Documents/Workspace/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import\"../scss/components/Login.css\";import{useDispatch}from\"react-redux\";import{loginAsync}from\"../redux/Slices/AuthSlice\";import{useNavigate}from\"react-router-dom\";import{useContext}from\"react\";// import AuthContext from \"../store/AuthContent\";\nimport{getAllChatsAsync}from\"../redux/Slices/ChatSlice\";import{getSocketStatus}from\"../redux/Slices/SocketSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(){// const auth_context = useContext(AuthContext);\nvar navigate=useNavigate();var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),username=_React$useState2[0],setUsername=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),password=_React$useState4[0],setPassword=_React$useState4[1];var dispatch=useDispatch();var dispatchAllchats=useDispatch();var login={email:username,password:password};var handleSubmit=function handleSubmit(e){e.preventDefault();dispatch(loginAsync(login)).then(function(auth){console.log(auth);if(auth.payload.status===\"success\"){dispatch(getSocketStatus({userId:auth.payload.data.user._id}));dispatchAllchats(getAllChatsAsync()).then(function(){navigate(\"/dashboard\");});// auth_context.login(auth.payload.token);\n}});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-box\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-box\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"username\",type:\"text\",name:\"\",required:\"\",onChange:function onChange(){setUsername(event.target.value);}}),/*#__PURE__*/_jsx(\"label\",{children:\"Username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-box\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",name:\"\",required:\"\",onChange:function onChange(){setPassword(event.target.value);},onKeyPress:function onKeyPress(e){if(e.key===\"Enter\"){handleSubmit(e);}}}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"})]}),/*#__PURE__*/_jsxs(\"a\",{onClick:handleSubmit,children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),\"Submit\"]})]})]})})});};export default LoginForm;","map":{"version":3,"names":["React","useDispatch","loginAsync","useNavigate","useContext","getAllChatsAsync","getSocketStatus","LoginForm","navigate","useState","username","setUsername","password","setPassword","dispatch","dispatchAllchats","login","email","handleSubmit","e","preventDefault","then","auth","console","log","payload","status","userId","data","user","_id","event","target","value","key"],"sources":["C:/Users/admin/Documents/Workspace/client/src/components/LoginForm.js"],"sourcesContent":["import React from \"react\";\r\nimport \"../scss/components/Login.css\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { loginAsync } from \"../redux/Slices/AuthSlice\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useContext } from \"react\";\r\n// import AuthContext from \"../store/AuthContent\";\r\nimport { getAllChatsAsync } from \"../redux/Slices/ChatSlice\";\r\nimport { getSocketStatus } from \"../redux/Slices/SocketSlice\";\r\nconst LoginForm = () => {\r\n\r\n  // const auth_context = useContext(AuthContext);\r\n\r\n  let navigate = useNavigate();\r\n  const [username, setUsername] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n  const dispatch = useDispatch();\r\n  const dispatchAllchats = useDispatch();\r\n  const login = {\r\n    email: username,\r\n    password: password,\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    dispatch(loginAsync(login)).then(auth => {\r\n      console.log(auth);\r\n      if (auth.payload.status === \"success\") {\r\n        dispatch(getSocketStatus({userId: auth.payload.data.user._id }));\r\n        dispatchAllchats(getAllChatsAsync()).then(() => {\r\n          navigate(\"/dashboard\");\r\n        });\r\n        // auth_context.login(auth.payload.token);\r\n      }\r\n    });\r\n  }; \r\n\r\n  return (\r\n    <div>\r\n      <div className=\"modal\">\r\n        <div className=\"login-box\">\r\n          <h2>Login</h2>\r\n          <form>\r\n            <div className=\"user-box\">\r\n              <input\r\n                id=\"username\"\r\n                type=\"text\"\r\n                name=\"\"\r\n                required=\"\"\r\n                onChange={() => {\r\n                  setUsername(event.target.value);\r\n                }}\r\n              />\r\n              <label>Username</label>\r\n            </div>\r\n            <div className=\"user-box\">\r\n              <input\r\n                id=\"password\"\r\n                type=\"password\"\r\n                name=\"\"\r\n                required=\"\"\r\n                onChange={() => {\r\n                  setPassword(event.target.value);\r\n                }}\r\n                onKeyPress={(e) => {\r\n                  if (e.key === \"Enter\") {\r\n                    handleSubmit(e);\r\n                  }\r\n                }}\r\n              />\r\n              <label>Password</label>\r\n            </div>\r\n            <a onClick={handleSubmit}>\r\n              <span></span>\r\n              <span></span>\r\n              <span></span>\r\n              <span></span>\r\n              Submit\r\n            </a>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginForm;\r\n"],"mappings":"+HAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAO,8BAAP,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,UAAT,KAA2B,2BAA3B,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,UAAT,KAA2B,OAA3B,CACA;AACA,OAASC,gBAAT,KAAiC,2BAAjC,CACA,OAASC,eAAT,KAAgC,6BAAhC,C,wFACA,GAAMC,UAAS,CAAG,QAAZA,UAAY,EAAM,CAEtB;AAEA,GAAIC,SAAQ,CAAGL,WAAW,EAA1B,CACA,oBAAgCH,KAAK,CAACS,QAAN,CAAe,EAAf,CAAhC,oDAAOC,QAAP,qBAAiBC,WAAjB,qBACA,qBAAgCX,KAAK,CAACS,QAAN,CAAe,EAAf,CAAhC,qDAAOG,QAAP,qBAAiBC,WAAjB,qBACA,GAAMC,SAAQ,CAAGb,WAAW,EAA5B,CACA,GAAMc,iBAAgB,CAAGd,WAAW,EAApC,CACA,GAAMe,MAAK,CAAG,CACZC,KAAK,CAAEP,QADK,CAEZE,QAAQ,CAAEA,QAFE,CAAd,CAKA,GAAMM,aAAY,CAAG,QAAfA,aAAe,CAACC,CAAD,CAAO,CAC1BA,CAAC,CAACC,cAAF,GACAN,QAAQ,CAACZ,UAAU,CAACc,KAAD,CAAX,CAAR,CAA4BK,IAA5B,CAAiC,SAAAC,IAAI,CAAI,CACvCC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACA,GAAIA,IAAI,CAACG,OAAL,CAAaC,MAAb,GAAwB,SAA5B,CAAuC,CACrCZ,QAAQ,CAACR,eAAe,CAAC,CAACqB,MAAM,CAAEL,IAAI,CAACG,OAAL,CAAaG,IAAb,CAAkBC,IAAlB,CAAuBC,GAAhC,CAAD,CAAhB,CAAR,CACAf,gBAAgB,CAACV,gBAAgB,EAAjB,CAAhB,CAAqCgB,IAArC,CAA0C,UAAM,CAC9Cb,QAAQ,CAAC,YAAD,CAAR,CACD,CAFD,EAGA;AACD,CACF,CATD,EAUD,CAZD,CAcA,mBACE,kCACE,YAAK,SAAS,CAAC,OAAf,uBACE,aAAK,SAAS,CAAC,WAAf,wBACE,6BADF,cAEE,qCACE,aAAK,SAAS,CAAC,UAAf,wBACE,cACE,EAAE,CAAC,UADL,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,EAHP,CAIE,QAAQ,CAAC,EAJX,CAKE,QAAQ,CAAE,mBAAM,CACdG,WAAW,CAACoB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAX,CACD,CAPH,EADF,cAUE,mCAVF,GADF,cAaE,aAAK,SAAS,CAAC,UAAf,wBACE,cACE,EAAE,CAAC,UADL,CAEE,IAAI,CAAC,UAFP,CAGE,IAAI,CAAC,EAHP,CAIE,QAAQ,CAAC,EAJX,CAKE,QAAQ,CAAE,mBAAM,CACdpB,WAAW,CAACkB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAX,CACD,CAPH,CAQE,UAAU,CAAE,oBAACd,CAAD,CAAO,CACjB,GAAIA,CAAC,CAACe,GAAF,GAAU,OAAd,CAAuB,CACrBhB,YAAY,CAACC,CAAD,CAAZ,CACD,CACF,CAZH,EADF,cAeE,mCAfF,GAbF,cA8BE,WAAG,OAAO,CAAED,YAAZ,wBACE,eADF,cAEE,eAFF,cAGE,eAHF,cAIE,eAJF,YA9BF,GAFF,GADF,EADF,EADF,CA+CD,CA3ED,CA6EA,cAAeX,UAAf"},"metadata":{},"sourceType":"module"}